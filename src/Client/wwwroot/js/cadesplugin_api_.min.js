(function(){"use strict";function w(n){function t(n,t){var f;try{f=r[n](t)}catch(e){return Promise.reject(e)}return f.done?f.value:Promise.resolve(f.value).then(i,u)}var r=n(Array.prototype.slice.call(arguments,1)),i=t.bind(t,"next"),u=t.bind(t,"throw");return i()}function b(n){return o.CreateObjectAsync(n)}function k(){return cpcsp_chrome_nmcades.ReleasePluginObjects()}function d(n){o=n}function g(t){if(t===n.LOG_LEVEL_DEBUG)r(n.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = DEBUG");else if(t===n.LOG_LEVEL_INFO)r(n.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = INFO");else if(t===n.LOG_LEVEL_ERROR)r(n.LOG_LEVEL_INFO,"cadesplugin_api.js: log_level = ERROR");else{r(n.LOG_LEVEL_ERROR,"cadesplugin_api.js: Incorrect log_level: "+t);return}p()||(n.current_log_level=t,n.current_log_level===n.LOG_LEVEL_DEBUG?window.postMessage("set_log_level=debug","*"):n.current_log_level===n.LOG_LEVEL_INFO?window.postMessage("set_log_level=info","*"):n.current_log_level===n.LOG_LEVEL_ERROR&&window.postMessage("set_log_level=error","*"))}function nt(n){return n.message?n.message.number?n.message+" (0x"+ot(n.number)+")":n.message:n}function tt(){return typeof n.EnableInternalCSP!="undefined"&&n.EnableInternalCSP}function it(){u!==1&&(i&&!s&&rt(),u=1,e("Истекло время ожидания загрузки плагина"))}function rt(){if(!window.cadesplugin_skip_extension_install){var n=document.createElement("div");n.id="cadesplugin_ovr";n.style="visibility: hidden; position: fixed; left: 0px; top: 0px; width:100%; height:100%; background-color: rgba(0,0,0,0.7)";n.innerHTML="<div id='cadesplugin_ovr_item' style='position:relative; max-width:400px; margin:100px auto; background-color:#fff; border:2px solid #000; padding:10px; text-align:center; opacity: 1; z-index: 1500'><button id='cadesplugin_close_install' style='float: right; font-size: 10px; background: transparent; border: 1; margin: -5px'>X<\/button><p>Для работы КриптоПро ЭЦП Browser plugin на данном сайте необходимо расширение для браузера. Убедитесь, что оно у Вас включено или установите его.<p><a href='https://www.cryptopro.ru/sites/default/files/products/cades/extensions/firefox_cryptopro_extension_latest.xpi'>Скачать расширение<\/a><\/p><\/div>";document.getElementsByTagName("Body")[0].appendChild(n);document.getElementById("cadesplugin_close_install").addEventListener("click",function(){t("Плагин недоступен");document.getElementById("cadesplugin_ovr").style.visibility="hidden"});n.addEventListener("click",function(){t("Плагин недоступен");document.getElementById("cadesplugin_ovr").style.visibility="hidden"});n.style.visibility="visible"}}function ut(){return p()?ft():t("Браузер не поддерживается")}function ft(){if(i||f)return v();let n=document.createElement("script");n.setAttribute("type","text/javascript");n.setAttribute("src",c||l?"chrome-extension://epebfcehmdedogndhlcacafjaacknbcm/nmcades_plugin_api.js":"chrome-extension://iifchhfnnmpdbibifmljnfjhpififfog/nmcades_plugin_api.js");n.onerror=t;n.onload=v;document.getElementsByTagName("head")[0].appendChild(n)}function v(){i||f||!window.cadesplugin_extension_loaded_callback||window.cadesplugin_extension_loaded_callback();window.postMessage("cadesplugin_echo_request","*");window.addEventListener("message",function(u){var o,e;if(typeof u.data=="string"&&u.data.match("cadesplugin_loaded")&&!h){if(i||f){if(o=u.data.substring(u.data.indexOf("url:")+4),!o.match("^(moz|safari)-extension://[a-zA-Z0-9/_-]+/nmcades_plugin_api.js$")){r(n.LOG_LEVEL_ERROR,'Bad url "'+o+'" for load CryptoPro Extension for CAdES Browser plug-in');t();return}e=document.createElement("script");e.setAttribute("type","text/javascript");e.setAttribute("src",o);e.onerror=t;e.onload=et;document.getElementsByTagName("head")[0].appendChild(e)}else cpcsp_chrome_nmcades.check_chrome_plugin(y,t);h=!0}},!1)}function et(){window.cadesplugin_extension_loaded_callback&&window.cadesplugin_extension_loaded_callback();s=!0;cpcsp_chrome_nmcades.check_chrome_plugin(y,t)}function y(){u=1;a()}function t(n){(typeof n=="undefined"||typeof n=="object")&&(n="Плагин недоступен");u=1;e(n)}function ot(n){return n<0&&(n=4294967295+n+1),n.toString(16).toUpperCase()}function r(t,i){typeof console!="undefined"&&t<=n.current_log_level&&(t===n.LOG_LEVEL_DEBUG?console.log("DEBUG: %s",i):t===n.LOG_LEVEL_INFO?console.info("INFO: %s",i):t===n.LOG_LEVEL_ERROR&&console.error("ERROR: %s",i))}function st(){var i=navigator.userAgent,t,n=i.match(/(opera|yabrowser|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(t=/\brv[ :]+(\d+)/g.exec(i)||[],{name:"IE",version:t[1]||""}):n[1]==="Chrome"&&(t=i.match(/\b(OPR|Edg|YaBrowser)\/(\d+)/),t!==null)?{name:t[1].replace("OPR","Opera"),version:t[2]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=i.match(/version\/(\d+)/i))!==null&&n.splice(1,1,t[1]),{name:n[0],version:n[1]})}function p(){let n=st();return n.name==="Edg"?!0:n.name==="YaBrowser"?(l=!0,!0):n.name==="Chrome"?n.version>=42:n.name==="Opera"?(c=!0,n.version>=33):n.name==="Firefox"?(i=!0,n.version>=52):n.name==="Safari"?(f=!0,n.version>=12):!1}if(!window.cadesplugin){var o,u=0,s=!1,h=!1,c=!1,i=!1,f=!1,l=!1,a,e,n=new Promise(function(n,t){a=n;e=t});n.JSModuleVersion="2.3.3";n.current_log_level=n.LOG_LEVEL_ERROR;window.cadesplugin_load_timeout||(window.cadesplugin_load_timeout=2e4);setTimeout(it,window.cadesplugin_load_timeout);n.async_spawn=w;n.CreateObjectAsync=b;n.ReleasePluginObjects=k;n.set=d;n.set_log_level=g;n.getLastError=nt;n.is_capilite_enabled=tt;window.cadesplugin=n;ut()}})();